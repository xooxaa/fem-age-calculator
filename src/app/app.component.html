<div class="age-calculator">
  <form [formGroup]="ageForm">
    <div class="date-inputs">
      <div class="date-input">
        <label for="day">Day</label>
        <input
          type="text"
          inputmode="numeric"
          id="day"
          formControlName="day"
          placeholder="DD"
          (input)="allowOnlyDigits($event); checkMinMax($event, 1, 31)"
        />
        <!-- @if (ageForm.get('day')?.invalid && ageForm.get('day')?.touched) {
        <div class="error-message">
          @if (ageForm.get('day')?.errors?.['required']) {
          <small>Day is required.</small>
          } @if (ageForm.get('day')?.errors?.['min']) {
          <small>Day cannot be less than 1.</small>
          } @if (ageForm.get('day')?.errors?.['max']) {
          <small>Day cannot be greater than 31.</small>
          }
        </div>
        } -->
      </div>

      <div class="date-input">
        <label for="month">Month</label>
        <input
          type="text"
          inputmode="numeric"
          id="month"
          formControlName="month"
          placeholder="MM"
          (input)="allowOnlyDigits($event); checkMinMax($event, 1, 12)"
        />
        <!-- @if (ageForm.get('month')?.invalid && ageForm.get('month')?.touched) {
        <div class="error-message">
          @if (ageForm.get('month')?.errors?.['required']) {
          <small>Month is required.</small>
          } @if (ageForm.get('month')?.errors?.['min']) {
          <small>Month cannot be less than 1.</small>
          } @if (ageForm.get('month')?.errors?.['max']) {
          <small>Month cannot be greater than 12.</small>
          }
        </div>
        } -->
      </div>

      <div class="date-input">
        <label for="year">Year</label>
        <input
          type="text"
          inputmode="numeric"
          id="year"
          formControlName="year"
          placeholder="YYYY"
          (input)="allowOnlyDigits($event); checkMinMax($event, 1, currentYear)"
        />
        <!-- @if (ageForm.get('year')?.invalid && ageForm.get('year')?.touched) {
        <div class="error-message">
          @if (ageForm.get('year')?.errors?.['required']) {
          <small>Year is required.</small>
          } @if (ageForm.get('year')?.errors?.['min']) {
          <small>Year cannot be before 1.</small>
          } @if (ageForm.get('year')?.errors?.['max']) {
          <small>Year cannot be after the current year.</small>
          }
        </div>
        } -->
      </div>
    </div>

    @if (ageForm.errors?.['invalidDate']) {
    <div class="error-message">
      <small>Date entered is invalid.</small>
    </div>
    } @if (ageForm.errors?.['dateInFuture']) {
    <div class="error-message">
      <small>Date must be in the past.</small>
    </div>
    } @if (!ageForm.invalid ) {
    <div class="success-message">
      <small>The date entered is valid.</small>
    </div>
    }
  </form>

  <div class="divider">
    <div class="divider-line"></div>
    <button
      class="icon-button"
      [disabled]="ageForm.invalid"
      (click)="calculateAge()"
    >
      <img
        src="icon-arrow.svg"
        alt=""
        class="icon"
        [class.icon-disabled]="ageForm.invalid"
      />
    </button>
  </div>

  <div class="age-output">
    <p>
      <span class="age-output-highlight">{{
        age().years ? age().years : "--"
      }}</span>
      years
    </p>
    <p>
      <span class="age-output-highlight">{{
        age().months ? age().months : "--"
      }}</span>
      months
    </p>
    <p>
      <span class="age-output-highlight">{{
        age().days ? age().days : "--"
      }}</span>
      days
    </p>
  </div>
</div>
